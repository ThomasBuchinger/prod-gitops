kind: Kustomization

namespace: external-gateway

resources:
- common.yaml

helmCharts:
- name: gateway-crds-helm
  repo: oci://docker.io/envoyproxy
  version: v1.4.2
  valuesInline:
    crds:
      gatewayApi:
        enabled: true
        channel: stable
      envoyGateway:
        enabled: true
- name: gateway-helm
  repo: oci://docker.io/envoyproxy
  version: v1.4.2
  includeCRDs: false
  namespace: external-gateway

# helm install eg oci://docker.io/envoyproxy/gateway-helm \
#   --version v1.4.2 \
#   -n envoy-gateway-system \
#   --create-namespace \
#   --skip-crds
  # helm template eg oci://docker.io/envoyproxy/gateway-crds-helm \
  # --version v1.4.2 \
  # --set crds.gatewayAPI.enabled=true \
  # --set crds.gatewayAPI.channel=standard \
  # --set crds.envoyGateway.enabled=true \
  # | kubectl apply --server-side -f -